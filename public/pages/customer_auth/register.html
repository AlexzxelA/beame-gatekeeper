<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Register as a Beame Developer for free | Beame SDK</title>
    <link rel="stylesheet" href="css/register.css">

    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,800"
          rel="stylesheet" type="text/css"/>


</head>
<body>

<div class="main-wrapper">

    <div class="row">
        <div class="column large-6 large-offset-1 end">
            <div class="logo"><a href="//www.beame.io/"><img src="img/logo.svg"></a></div>
        </div>
    </div>

    <div class="row">


        <div class="column large-6 large-offset-1">
            <div class="left-column__wrapper">
                <h1>Sign up!</h1>
                <p>Get your developer credentials by&nbsp;email. You&rsquo;ll&nbsp;generate the rest on&nbsp;your
                    machine.</p>
                <div id="success" style="display:none" class="small">
                    Successfully registered, yay.
                </div>
                <form id="register_form" action='/register/save' method="post" class="form-main">
                    <div id="error">&nbsp;</div>
                    <input name="name" placeholder="Name" class="form-input"/>
                    <input name="email" type="email" placeholder="Email" class="form-input"/>
                    <input name="user_id" placeholder="External user ID" class="form-input"/>

                    <input type="submit" name="submit" value="Sign up" class="button">
                </form>
            </div>
        </div>

    </div>

</div>

<div id="overlay" class="overlay">
    <div>
        <h3>Processing Registration</h3>
        <svg class="spinner" viewBox="0 0 50 50">
            <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
        </svg>
    </div>
</div>

<div id="overlay-success">
    <div>
        <img class="reg-ok" src="img/ok.svg">
        <h1 id="success-message">Done. Please check your email</h1>
    </div>
</div>

<!-- Start of beamesdk Zendesk Widget script -->
<script>
    window.zEmbed || function (e, t) {
        var n, o, d, i, s, a = [], r = document.createElement("iframe");
        window.zEmbed = function () {
            a.push(arguments)
        }, window.zE = window.zE || window.zEmbed, r.src = "javascript:false", r.title = "", r.role = "presentation", (r.frameElement || r).style.cssText = "display: none", d = document.getElementsByTagName("script"), d = d[d.length - 1], d.parentNode.insertBefore(r, d), i = r.contentWindow, s = i.document;
        try {
            o = s
        } catch (e) {
            n = document.domain, r.src = 'javascript:var d=document.open();d.domain="' + n + '";void(0);', o = s
        }
        o.open()._l = function () {
            var o = this.createElement("script");
            n && (this.domain = n), o.id = "js-iframe-async", o.src = e, this.t = +new Date, this.zendeskHost = t, this.zEQueue = a, this.body.appendChild(o)
        }, o.write('<body onload="document._l();">'), o.close()
    }("https://assets.zendesk.com/embeddable_framework/main.js", "beamesdk.zendesk.com");
</script>
<!-- End of beamesdk Zendesk Widget script -->

<script src="lib/jquery/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
<script>


    function showError(response) {
        document.getElementById("error").innerHTML = response.responseDesc;
        document.getElementById("overlay").style.display = "none";
    }
    function showSuccess(response) {
       window.location.href = response.url;
    }

    $(document).ready(function () {
        $('#register_form').submit(function () {
            document.getElementById("overlay").style.display = "block";
            $(this).ajaxSubmit({
                error: function (response) {
                    showError(response);
                },
                success: function (response) {
                    response.responseCode === 0 ? showSuccess(response) : showError(response);
                }
            });
            //Very important line, it disable the page refresh.
            return false;
        });
    });
</script>

</body>
</html>